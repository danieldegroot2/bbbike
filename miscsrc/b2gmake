#!/usr/local/bin/perl -w
# -*- perl -*-

#
# $Id: b2gmake,v 1.2 2003/08/12 22:53:10 eserte Exp $
# Author: Slaven Rezic
#
# Copyright (C) 1999,2003 Slaven Rezic. All rights reserved.
# This program is free software; you can redistribute it and/or
# modify it under the same terms as Perl itself.
#
# Mail: slaven@rezic.de
# WWW:  http://bbbike.sourceforge.net/
#

# Note: if MAKEFLAGS is empty, then this will result in an lone-standing
# dash. However, this does not seem to hurt GNU make.

while(<STDIN>) {
    s/^\.if\s+defined\(([^\)]+)\)/ifdef $1/;
    s/^\.if(.+)eq(.+)/ifeq $1 $2/;
    s/^\.if(.+)ne(.+)/ifneq $1 $2/;
    s/^\.else(\s+)/else$1/;
    s/^\.endif(\s+)/endif$1/;
    s/\$\{\.?MAKEFLAGS\}/-\${MAKEFLAGS}/g;
    s/\$\(\.?MAKEFLAGS\)/-\${MAKEFLAGS}/g;
    print;
}

__END__
